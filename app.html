<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Outfit Suggestion App</title>
    <style>
        body { font-family: Arial, sans-serif; }
        .container { max-width: 600px; margin: auto; padding: 20px; }
        .result { margin-top: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Outfit Suggestion Based on Weather</h1>
        <form id="outfitForm">
            <label for="zipCode">Enter your zip code:</label>
            <input type="text" id="zipCode" name="zipCode" required>
            <br><br>

            <label for="occasion">Select your occasion:</label>
            <select id="occasion" name="occasion">
                <option value="formal">Formal</option>
                <option value="casual">Casual</option>
            </select>
            <br><br>

            <label for="skinTone">Select your skin tone:</label>
            <select id="skinTone" name="skinTone">
                <option value="light">Fair Light - Fair</option>
                <option value="medium">Medium Light - Medium</option>
                <option value="dark">Medium Dark - Dark</option>
            </select>
            <br><br>
			
			<label for="season">Select season:</label>
            <select id="season" name="season">
                <option value="summer">Summer</option>
                <option value="fall">Fall</option>
				<option value="winter">Winter</option>
                <option value="spring">Spring</option>
            </select>
            <br><br>

            <button type="button" onclick="fetchWeather()">Get Outfit Suggestion</button>
        </form>
        
        <div class="result" id="result">
            <!-- Results will be displayed here -->
        </div>
    </div>

    <script>
        function fetchWeather() {
            const zipCode = document.getElementById('zipCode').value;
            const apiKey = '426951d21ec4e1baef5bf01a52428423';
            const url = `https://api.openweathermap.org/data/2.5/weather?zip=${zipCode},us&appid=${apiKey}&units=metric`;

            console.log(`Fetching weather for zip code: ${zipCode}`); // Debugging log

            fetch(url)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('Weather data:', data); // Debugging log
                    const temperature = data.main.temp;
                    suggestOutfit(temperature);
                })
                .catch(error => {
                    console.error('Error fetching weather data:', error);
                    document.getElementById('result').innerHTML = `<p>Failed to retrieve weather data. Please check your input.</p>`;
                });
        }

        function suggestOutfit(temperature) {
            const occasion = document.getElementById('occasion').value;
            const season = document.getElementById('season').value;
            const skinTone = document.getElementById('skinTone').value;
            let outfit = '';
            let imagePaths = [];

            if (skinTone === "light" && season === "winter" && occasion === "formal" && temperature <= 0) {
                <!-- outfit = 'Wear a warm coat, scarf, and gloves.'; -->
                imagePaths = [
                    './assets/winter_formal_outfits/winter_outfit_1.png',
                    './assets/winter_formal_outfits/winter_outfit_2.png',
                    './assets/winter_formal_outfits/winter_outfit_3.png',
                    './assets/winter_formal_outfits/winter_outfit_4.png',
                    './assets/winter_formal_outfits/winter_outfit_5.png'
                ];
            } else if (skinTone === "light" && season === "winter" && occasion === "formal" && temperature > 0 && temperature <= 10) {
                <!-- outfit = 'A light jacket and long pants would be suitable.'; -->
                 imagePaths = [
                    './assets/winter_formal_outfits/winter_outfit_6.png',
                    './assets/winter_formal_outfits/winter_outfit_7.png',
                    './assets/winter_formal_outfits/winter_outfit_8.png',
                    './assets/winter_formal_outfits/winter_outfit_9.png',
                    './assets/winter_formal_outfits/winter_outfit_10.png'
                ];
            } else {
                outfit = 'Wear shorts and a t-shirt.';
                imagePaths = [
                    './assets/summer-casual1.jpg',
                    './assets/summer-casual2.jpg',
                    './assets/summer-casual3.jpg',
                    './assets/summer-casual4.jpg',
                    './assets/summer-casual5.jpg'
                ];
            }

            // Generate HTML for the images
            const imagesHTML = imagePaths
                .map(path => `<img src="${path}" alt="Outfit suggestion" style="max-width: 100px; height: auto; margin: 5px;">`)
                .join('');

            document.getElementById('result').innerHTML = `
                <p>Based on the temperature of ${temperature}Â°C and your selections, ${outfit}</p>
                <div style="display: flex; flex-wrap: wrap;">${imagesHTML}</div>
            `;
        }
    </script>
</body>
</html>
